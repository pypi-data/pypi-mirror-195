"use strict";(self.webpackChunk_jupyter_collaboration_extension=self.webpackChunk_jupyter_collaboration_extension||[]).push([[497],{9497:(e,r,t)=>{t.r(r),t.d(r,{default:()=>g});var o,a=t(3031),n=t(6677),s=t(2917),i=t(838);!function(e){e.openPath="filebrowser:open-path"}(o||(o={}));const l={id:"@jupyter/collaboration-extension:defaultFileBrowser",provides:n.IDefaultFileBrowser,requires:[n.IFileBrowserFactory,s.ITranslator],optional:[a.IRouter,a.JupyterFrontEnd.ITreeResolver,a.ILabShell],activate:async(e,r,t,o,a,n)=>{console.debug("@jupyter/collaboration-extension:defaultFileBrowser: activated");const{commands:s}=e,l=t.load("jupyter_collaboration"),d=new i.YDrive(e.serviceManager.user,l);e.serviceManager.contents.addDrive(d);const u=r.createFileBrowser("filebrowser",{auto:!1,restore:!1,driveName:"YDrive"});return c.restoreBrowser(u,s,o,a,n),u}};var c;!function(e){e.restoreBrowser=async function(e,r,t,a,n){const s="jp-mod-restoring";if(e.addClass(s),!t)return await e.model.restore(e.id),await e.model.refresh(),void e.removeClass(s);const i=async()=>{t.routed.disconnect(i);const l=await(null==a?void 0:a.paths);(null==l?void 0:l.file)||(null==l?void 0:l.browser)?(await e.model.restore(e.id,!1),l.file&&await r.execute(o.openPath,{path:l.file,dontShowBrowser:!0}),l.browser&&await r.execute(o.openPath,{path:l.browser,dontShowBrowser:!0})):(await e.model.restore(e.id),await e.model.refresh()),e.removeClass(s),(null==n?void 0:n.isEmpty("main"))&&r.execute("launcher:create")};t.routed.connect(i)}}(c||(c={}));var d=t(8823),u=t(2378),w=t(3944),p=t(2014),v=t(8050),b=t(3209),h=t(4643),m=t(981),f=t(6493),y=t(7099);const g=[l,{id:"@jupyter/collaboration-extension:userMenu",autoStart:!0,requires:[],provides:u.IUserMenu,activate:e=>{const{commands:r}=e,{user:t}=e.serviceManager;return new u.UserMenu({commands:r,user:t})}},{id:"@jupyter/collaboration-extension:userMenuBar",autoStart:!0,requires:[u.IUserMenu],activate:async(e,r)=>{const{shell:t}=e,{user:o}=e.serviceManager,a=new p.MenuBar({forceItemsPosition:{forceX:!1,forceY:!1},renderer:new u.RendererUserMenu(o)});a.id="jp-UserMenu",o.userChanged.connect((()=>a.update())),a.addMenu(r),t.add(a,"top",{rank:1e3})}},{id:"@jupyter/collaboration-extension:rtcGlobalAwareness",autoStart:!0,requires:[h.IStateDB],provides:u.IGlobalAwareness,activate:(e,r)=>{const{user:t}=e.serviceManager,o=new m.Doc,a=new f.GL(o),n=b.ServerConnection.makeSettings(),s=v.URLExt.join(n.wsUrl,"api/yjs");new y.WebsocketProvider(s,"JupyterLab:globalAwareness",o,{awareness:a});const i=()=>{a.setLocalStateField("user",t.identity)};return t.isReady&&i(),t.ready.then(i).catch((e=>console.error(e))),t.userChanged.connect(i),r.changed.connect((async()=>{var e,t;const o=(null===(t=null===(e=(await r.toJSON())["layout-restorer:data"])||void 0===e?void 0:e.main)||void 0===t?void 0:t.current)||"";o.startsWith("editor")||o.startsWith("notebook")?a.setLocalStateField("current",o):a.setLocalStateField("current",null)})),a}},{id:"@jupyter/collaboration-extension:rtcPanel",autoStart:!0,requires:[u.IGlobalAwareness,s.ITranslator],activate:(e,r,t)=>{const{user:o}=e.serviceManager,a=t.load("jupyter_collaboration"),n=new w.SidePanel;n.id=d.DOMUtils.createDomID(),n.title.icon=w.usersIcon,n.title.caption=a.__("Collaboration"),n.addClass("jp-RTCPanel"),e.shell.add(n,"left",{rank:300});const s=new u.UserInfoPanel(o);s.title.label=a.__("User info"),s.title.caption=a.__("User information"),n.addWidget(s);const i=new u.CollaboratorsPanel(o,r,(r=>{e.commands.execute("docmanager:open",{path:r})}));i.title.label=a.__("Online Collaborators"),n.addWidget(i)}}]}}]);
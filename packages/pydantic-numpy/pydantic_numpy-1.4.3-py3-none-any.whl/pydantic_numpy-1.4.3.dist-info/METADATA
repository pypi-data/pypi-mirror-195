Metadata-Version: 2.1
Name: pydantic-numpy
Version: 1.4.3
Summary: Seamlessly integrate numpy arrays into pydantic models
Home-page: https://github.com/caniko/pydantic-numpy
License: MIT
Author: Can H. Tartanoglu
Author-email: canhtart@gmail.com
Requires-Python: >=3.8,<3.12
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Requires-Dist: compress-pickle[lz4]
Requires-Dist: numpy
Requires-Dist: pydantic
Requires-Dist: ruamel-yaml (>=0.17.21,<0.18.0)
Project-URL: Repository, https://github.com/caniko/pydantic-numpy
Description-Content-Type: text/markdown

[![Build Status](https://github.com/cheind/pydantic-numpy/actions/workflows/python-package.yml/badge.svg)](https://github.com/cheind/pydantic-numpy/actions/workflows/python-package.yml)

# pydantic-numpy

This library provides support for integrating numpy `np.ndarray`'s into pydantic models.

## Usage

For more examples see [test_ndarray.py](./tests/test_ndarray.py)

```python
import pydantic_numpy.dtype as pnd
from pydantic_numpy import NDArray, NDArrayFp32, NumpyModel


class MyPydanticNumpyModel(NumpyModel):
    K: NDArray[pnd.float32]
    C: NDArrayFp32  # <- Shorthand for same type as K


# Instantiate from array
cfg = MyPydanticNumpyModel(K=[1, 2])
# Instantiate from numpy file
cfg = MyPydanticNumpyModel(K={"path": "path_to/array.npy"})
# Instantiate from npz file with key
cfg = MyPydanticNumpyModel(K={"path": "path_to/array.npz", "key": "K"})

cfg.K
# np.ndarray[np.float32]

cfg.dump("path_to_dump")
cfg.load("path_to_dump")
```

### Subfields

This package also comes with `pydantic_numpy.dtype`, which adds subtyping support such as `NDArray[pnd.float32]`. All subfields must be from this package as numpy dtypes have no [Pydantic support](https://pydantic-docs.helpmanual.io/usage/types/#generic-classes-as-types).

## Install

```shell
pip install pydantic-numpy
```

## History

The original idea originates from [this discussion](https://gist.github.com/danielhfrank/00e6b8556eed73fb4053450e602d2434), but stopped working for `numpy>=1.22`. This repository picks up where the previous discussion ended

-   added designated repository for better handling of PRs
-   added support for `numpy>1.22`
-   Dtypes are no longer strings but `np.generics`. I.e. `NDArray['np.float32']` becomes `NDArray[np.float32]`
-   added automated tests and continuous integration for different numpy/python versions


{"version":3,"file":"index.bf84e1e4.js","sources":["../../../../ui/packages/icons/src/Chat.svelte","../../../../ui/packages/chatbot/src/ChatBot.svelte","../../../../ui/packages/app/src/components/Chatbot/Chatbot.svelte","../../../../ui/packages/app/src/components/Chatbot/index.ts"],"sourcesContent":["<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\txmlns:xlink=\"http://www.w3.org/1999/xlink\"\n\taria-hidden=\"true\"\n\trole=\"img\"\n\tclass=\"iconify iconify--carbon\"\n\twidth=\"100%\"\n\theight=\"100%\"\n\tpreserveAspectRatio=\"xMidYMid meet\"\n\tviewBox=\"0 0 32 32\"\n>\n\t<path\n\t\tfill=\"currentColor\"\n\t\td=\"M17.74 30L16 29l4-7h6a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h9v2H6a4 4 0 0 1-4-4V8a4 4 0 0 1 4-4h20a4 4 0 0 1 4 4v12a4 4 0 0 1-4 4h-4.84Z\"\n\t/>\n\t<path fill=\"currentColor\" d=\"M8 10h16v2H8zm0 6h10v2H8z\" />\n</svg>\n","<script lang=\"ts\">\n\timport { beforeUpdate, afterUpdate, createEventDispatcher } from \"svelte\";\n\timport type { Styles } from \"@gradio/utils\";\n\n\texport let value: Array<[string | null, string | null]> | null;\n\tlet old_value: Array<[string | null, string | null]> | null;\n\texport let pending_message: boolean = false;\n\texport let root: string;\n\texport let style: Styles = {};\n\n\tlet div: HTMLDivElement;\n\tlet autoscroll: Boolean;\n\n\tconst dispatch = createEventDispatcher<{ change: undefined }>();\n\tconst redirect_src_url = (src: string) =>\n\t\tsrc.replace('src=\"/file', `src=\"${root}file`);\n\n\t$: _value = value\n\t\t? value.map(([user_msg, bot_msg]) => [\n\t\t\t\tuser_msg ? redirect_src_url(user_msg) : null,\n\t\t\t\tbot_msg ? redirect_src_url(bot_msg) : null\n\t\t  ])\n\t\t: [];\n\tbeforeUpdate(() => {\n\t\tautoscroll =\n\t\t\tdiv && div.offsetHeight + div.scrollTop > div.scrollHeight - 20;\n\t});\n\n\tafterUpdate(() => {\n\t\tif (autoscroll) {\n\t\t\tdiv.scrollTo(0, div.scrollHeight);\n\t\t\tdiv.querySelectorAll(\"img\").forEach((n) => {\n\t\t\t\tn.addEventListener(\"load\", () => {\n\t\t\t\t\tdiv.scrollTo(0, div.scrollHeight);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t});\n\n\t$: {\n\t\tif (value !== old_value) {\n\t\t\told_value = value;\n\t\t\tdispatch(\"change\");\n\t\t}\n\t}\n</script>\n\n<div\n\tclass=\"wrap\"\n\tstyle:height={`${style.height}px`}\n\tstyle:max-height={`${style.height}px`}\n\tbind:this={div}\n>\n\t<div class=\"message-wrap\">\n\t\t{#each _value as message, i}\n\t\t\t<div\n\t\t\t\tdata-testid=\"user\"\n\t\t\t\tclass:latest={i === _value.length - 1}\n\t\t\t\tclass=\"message user\"\n\t\t\t\tclass:hide={message[0] === null}\n\t\t\t>\n\t\t\t\t{@html message[0]}\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tdata-testid=\"bot\"\n\t\t\t\tclass:latest={i === _value.length - 1}\n\t\t\t\tclass=\"message bot\"\n\t\t\t\tclass:hide={message[1] === null}\n\t\t\t>\n\t\t\t\t{@html message[1]}\n\t\t\t</div>\n\t\t{/each}\n\t\t{#if pending_message}\n\t\t\t<div data-testid=\"bot\" class=\"message pending\">\n\t\t\t\t<div class=\"dot-flashing\" />\n\t\t\t\t&nbsp;\n\t\t\t\t<div class=\"dot-flashing\" />\n\t\t\t\t&nbsp;\n\t\t\t\t<div class=\"dot-flashing\" />\n\t\t\t</div>\n\t\t{/if}\n\t</div>\n</div>\n\n<style>\n\t.wrap {\n\t\tmargin-top: var(--size-4);\n\t\theight: 100%;\n\t\tmax-height: 480px;\n\t\toverflow-y: auto;\n\t}\n\n\t.message-wrap {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: var(--size-4);\n\t\tpadding: var(--size-3);\n\t}\n\n\t.message-wrap > div :global(img) {\n\t\tborder-radius: 13px;\n\t\tmax-width: 30vw;\n\t}\n\n\t.message {\n\t\tborder-width: 1px;\n\t\tborder-style: solid;\n\t\tborder-radius: var(--size-2);\n\t\tpadding: var(--size-3);\n\t\tfont-size: var(--scale-0);\n\t\tline-height: var(--line-md);\n\t\toverflow-wrap: break-word;\n\t}\n\n\t.user {\n\t\tmargin-left: var(--size-6);\n\t\tborder-color: var(--color-accent-light);\n\t\tborder-bottom-right-radius: 0;\n\t\tbackground: var(--color-accent-soft);\n\t\tcolor: var(--color-text-body);\n\t}\n\t.pending,\n\t.bot {\n\t\tborder-color: var(--color-border-primary);\n\t\tbackground: var(--color-background-secondary);\n\t}\n\t.bot {\n\t\tmargin-right: var(--size-6);\n\t\tborder-bottom-left-radius: 0;\n\t\tpadding-left: var(--size-9);\n\t}\n\t.pending {\n\t\tmargin: 0 var(--size-6);\n\t}\n\t:global(.dark) .user {\n\t\tborder-color: var(--color-border-primary);\n\t\tbackground: var(--color-grey-700);\n\t\tcolor: var(--color-text-body);\n\t}\n\n\t.pending {\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tgap: 2px;\n\t}\n\t.dot-flashing {\n\t\tanimation: dot-flashing 1s infinite linear alternate;\n\t\tborder-radius: 5px;\n\t\tbackground-color: var(--color-text-subdued);\n\t\twidth: 5px;\n\t\theight: 5px;\n\t\tcolor: var(--color-text-subdued);\n\t}\n\t.dot-flashing:nth-child(2) {\n\t\tanimation-delay: 0.33s;\n\t}\n\t.dot-flashing:nth-child(3) {\n\t\tanimation-delay: 0.66s;\n\t}\n\n\t/* Small screen */\n\t@media (max-width: 480px) {\n\t\t.user {\n\t\t\talign-self: flex-end;\n\t\t}\n\t\t.bot {\n\t\t\talign-self: flex-start;\n\t\t\tpadding-left: var(--size-3);\n\t\t}\n\t}\n\n\t@keyframes dot-flashing {\n\t\t0% {\n\t\t\topacity: 0.8;\n\t\t}\n\t\t50% {\n\t\t\topacity: 0.5;\n\t\t}\n\t\t100% {\n\t\t\topacity: 0.8;\n\t\t}\n\t}\n\t.message-wrap .message :global(img) {\n\t\tmargin: var(--size-2);\n\t\tmax-height: 200px;\n\t}\n\t.message-wrap .message :global(a) {\n\t\tcolor: var(--color-text-link);\n\t\ttext-decoration: underline;\n\t}\n\n\t.hide {\n\t\tdisplay: none;\n\t}\n</style>\n","<script lang=\"ts\">\n\timport { ChatBot } from \"@gradio/chatbot\";\n\timport { Block, BlockLabel } from \"@gradio/atoms\";\n\timport type { LoadingStatus } from \"../StatusTracker/types\";\n\timport type { Styles } from \"@gradio/utils\";\n\timport { Chat } from \"@gradio/icons\";\n\n\texport let elem_id: string = \"\";\n\texport let visible: boolean = true;\n\texport let value: Array<[string | null, string | null]> = [];\n\texport let style: Styles = {};\n\texport let label: string;\n\texport let show_label: boolean = true;\n\texport let color_map: Record<string, string> = {};\n\texport let root: string;\n\n\t$: if (!style.color_map && Object.keys(color_map).length) {\n\t\tstyle.color_map = color_map;\n\t}\n\n\texport let loading_status: LoadingStatus | undefined;\n</script>\n\n<Block {elem_id} {visible}>\n\t{#if show_label}\n\t\t<BlockLabel\n\t\t\t{show_label}\n\t\t\tIcon={Chat}\n\t\t\tlabel={label || \"Chatbot\"}\n\t\t\tdisable={typeof style.container === \"boolean\" && !style.container}\n\t\t/>\n\t{/if}\n\t<ChatBot\n\t\t{style}\n\t\t{root}\n\t\t{value}\n\t\tpending_message={loading_status?.status === \"pending\"}\n\t\ton:change\n\t/>\n</Block>\n","export { default as Component } from \"./Chatbot.svelte\";\nexport const modes = [\"static\"];\n\nexport const document = (config: Record<string, any>) => ({\n\ttype: {\n\t\tpayload: \"Array<[string, string]>\"\n\t},\n\tdescription: {\n\t\tpayload: \"list of message pairs of\"\n\t},\n\texample_data: config.value?.length\n\t\t? config.value\n\t\t: [\n\t\t\t\t[\"Hi\", \"Hello\"],\n\t\t\t\t[\"1 + 1\", \"2\"]\n\t\t  ]\n});\n"],"names":[],"mappings":"sjCAAA,SAWC,OAIA,yLC8CU,MAAQ,YAQR,MAAQ,+HAZD,QAAM,KAAO,OAAS,CAAC,aAEzB,MAAQ,KAAO,IAAI,kFAMjB,QAAM,KAAO,OAAS,CAAC,aAEzB,MAAQ,KAAO,IAAI,UAZhC,gCAQA,2CAFQ,MAAQ,0CAJD,QAAM,KAAO,OAAS,CAAC,kBAEzB,MAAQ,KAAO,IAAI,cAUxB,MAAQ,0CAJD,QAAM,KAAO,OAAS,CAAC,kBAEzB,MAAQ,KAAO,IAAI;;;;oIAMhC,mDAnBM,0BAAL,mCAkBG,6LAvBW,KAAM,mCACF,KAAM,uBAH5B,SAMC,oGACQ,uBAAL,0HAAA,OAkBG,0EAvBW,KAAM,wCACF,KAAM,2FA9ChB,WACP,GACO,kBAA2B,OAC3B,WACA,cAEP,EACA,OAEE,GAAW,IACX,EAAoB,GACzB,EAAI,QAAQ,qBAAsB,SAQnC,OACC,EACC,GAAO,EAAI,aAAe,EAAI,UAAY,EAAI,aAAe,KAG/D,OACK,GACH,GAAI,SAAS,EAAG,EAAI,YAAY,EAChC,EAAI,iBAAiB,KAAK,EAAE,QAAS,IACpC,EAAE,iBAAiB,YAClB,EAAI,SAAS,EAAG,EAAI,YAAY,kDAkBzB,uMAlCR,EAAS,EACT,EAAM,MAAM,EAAU,MACtB,EAAW,EAAiB,CAAQ,EAAI,KACxC,EAAU,EAAiB,CAAO,EAAI,0BAoBpC,IAAU,QACb,EAAY,CAAK,EACjB,EAAS,QAAQ,6LCfX,QACC,MAAS,wBACA,MAAM,WAAc,YAAc,KAAM,qHADjD,MAAS,iCACA,MAAM,WAAc,YAAc,KAAM,+HALrD,kFAYa,MAAgB,SAAW,0HAZxC,6MAYa,MAAgB,SAAW,ofA7BlC,UAAkB,OAClB,UAAmB,OACnB,eACA,eACA,YACA,aAAsB,OACtB,mBACA,WAMA,+YAJH,EAAM,WAAa,OAAO,KAAK,CAAS,EAAE,YACjD,EAAM,UAAY,uMChBP,IAAQ,CAAC,QAAQ,EAEjB,GAAW,AAAC,KACxB,KAAM,CACL,QAAS,2BAEV,YAAa,CACZ,QAAS,4BAEV,aAAc,EAAO,OAAO,OACzB,EAAO,MACP,CACA,CAAC,KAAM,OAAO,EACd,CAAC,QAAS,GAAG,EAEjB"}
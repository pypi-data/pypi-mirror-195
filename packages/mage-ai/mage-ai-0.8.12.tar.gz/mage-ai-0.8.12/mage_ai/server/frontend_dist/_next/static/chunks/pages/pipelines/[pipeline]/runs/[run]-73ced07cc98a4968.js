(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8662],{62976:function(e,n,t){"use strict";t.d(n,{Z:function(){return H}});var r=t(82394),i=t(21831),o=t(82684),u=t(10919),c=t(12691),l=t.n(c),a=t(34376),d=t.n(a),s=t(9518),p=t(63068),f=t(44628),h=t(6508),m=t(67971),v=t(19711),g=t(23831),b=t(31969),y=function(){var e=document.createElement("div");e.setAttribute("style","width: 100px; height: 100px; overflow: scroll; position:absolute; top:-9999px;"),document.body.appendChild(e);var n=e.offsetWidth-e.clientWidth;return document.body.removeChild(e),n},O=t(2005),x=t(31012),w=t(37391),j=t(6753),P=t(49125),Z=t(20567),E=t(24224),S=t(28598);function k(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?k(Object(t),!0).forEach((function(n){(0,r.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var D=2*P.iI+x.dN,I=20*P.iI,N=s.default.div.withConfig({displayName:"DataTable__Styles",componentId:"sc-1arr863-0"})([""," "," "," .body > div{","}.table{border-spacing:0;display:inline-block;"," "," "," "," .tr{.td.td-index-column{","}}.th{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;","}.th,.td{"," font-family:",";margin:0;","}.td{padding:","px;}&.sticky{overflow:auto;}.header{overflow:hidden;}}"],(function(e){return e.disableScrolling&&"\n    overflow: hidden;\n  "}),(function(e){return e.height&&"\n    height: ".concat(e.height,"px;\n  ")}),(function(e){return e.maxHeight&&"\n    max-height: ".concat(e.maxHeight,"px;\n  ")}),w.w5,(function(e){return!e.noBorderBottom&&"\n      border-bottom: 1px solid ".concat((e.theme.borders||b.Z.borders).medium,";\n    ")}),(function(e){return!e.noBorderLeft&&"\n      border-left: 1px solid ".concat((e.theme.borders||b.Z.borders).medium,";\n    ")}),(function(e){return!e.noBorderRight&&"\n      border-right: 1px solid ".concat((e.theme.borders||b.Z.borders).medium,";\n    ")}),(function(e){return!e.noBorderTop&&"\n      border-top: 1px solid ".concat((e.theme.borders||b.Z.borders).medium,";\n    ")}),(function(e){return"\n          color: ".concat((e.theme.content||b.Z.content).default,";\n        ")}),(function(e){return"\n        height: ".concat(e.columnHeaderHeight||D,"px;\n      ")}),x.iD,O.ry,(function(e){return"\n        background-color: ".concat((e.theme.background||b.Z.background).table,";\n        border-bottom: 1px solid ").concat((e.theme.borders||b.Z.borders).medium,";\n        border-right: 1px solid ").concat((e.theme.borders||b.Z.borders).medium,";\n      ")}),1*P.iI);function T(e){var n=e.original,t=8.5*Math.max.apply(Math,(0,i.Z)(n.map((function(e){return(null===e||void 0===e?void 0:e.length)||0})))),r=Math.ceil(t/(I-2*P.iI));return Math.max(r,1)*x.dN+2*P.iI}function C(e){var n=e.columnHeaderHeight,t=e.columns,r=e.data,c=e.disableScrolling,a=e.height,w=e.index,k=e.invalidValues,N=e.maxHeight,C=e.numberOfIndexes,H=e.previewIndexes,R=e.renderColumnHeader,M=e.width,B=(0,o.useContext)(s.ThemeContext),A=(0,o.useRef)(null),L=(0,o.useRef)(null);(0,o.useEffect)((function(){var e=function(e){var n;null===A||void 0===A||null===(n=A.current)||void 0===n||n.scroll(e.target.scrollLeft,0)};return L&&L.current.addEventListener("scroll",e),function(){var n;null===L||void 0===L||null===(n=L.current)||void 0===n||n.removeEventListener("scroll",e)}}),[A,L]);var U=(0,o.useMemo)((function(){return w&&r&&w.length===r.length}),[r,w]),F=(0,o.useMemo)((function(){var e=[];return(0,E.w6)(C).forEach((function(n,t){var o=8.7*String(null===r||void 0===r?void 0:r.length).length;if(U){var u=w.map((function(e){return C>=2?String(e[t]).length:String(e).length}));o=8.7*Math.max.apply(Math,(0,i.Z)(u))}e.push(o+2*P.iI)})),e}),[r,w,C,U]),V=t.map((function(e){return null===e||void 0===e?void 0:e.Header})).slice(1),G=(0,o.useMemo)((function(){return y()}),[]),X=(0,o.useMemo)((function(){var e=M-(Math.max.apply(Math,(0,i.Z)(F))+1.5*P.iI+G),n=t.length-1,r=I;return r*n<e&&(r=e/n),{width:r}}),[t,F,G,M]),W=(0,f.useTable)({columns:t,data:r,defaultColumn:X},f.useBlockLayout,h.useSticky),J=W.getTableBodyProps,Y=W.getTableProps,q=W.headerGroups,z=W.prepareRow,Q=W.rows,$=d().query.slug,K=void 0===$?[]:$,ee=new Set((null===H||void 0===H?void 0:H.removedRows)||[]),ne=(0,o.useCallback)((function(e){var n=e.index,t=e.style,r=Q[n];z(r);var i=r.original,c=ee.has(n);return(0,S.jsx)("div",_(_({},r.getRowProps({style:_(_({},t),{},{width:"auto"})})),{},{className:"tr",children:r.cells.map((function(e,t){var r,a=t<=C-1,d=e.getCellProps(),s=e.column.id,p=null===k||void 0===k||null===(r=k[s])||void 0===r?void 0:r.includes(n),f=_({},d.style);a&&(f.fontFamily=O.Vp,f.left=0,f.position="sticky",f.textAlign=w?"right":"center",f.width=F[t]);var h,g=i[t-C],y=V.indexOf(s);if(p&&(f.color=b.Z.interactive.dangerBorder),c&&(f.backgroundColor=b.Z.background.danger),Array.isArray(g)||"object"===typeof g)try{g=JSON.stringify(g)}catch(x){g="Error: cannot display value"}return a&&(U?(h=w[n],Array.isArray(h)&&(h=h[t])):h=e.render("Cell")),(0,o.createElement)("div",_(_({},d),{},{className:"td ".concat(a?"td-index-column":""),key:"".concat(t,"-").concat(g),style:f}),h,!a&&(0,S.jsxs)(m.Z,{justifyContent:"space-between",children:[(0,S.jsxs)(v.ZP,{danger:p,default:!0,wordBreak:!0,children:[!0===g&&"true",!1===g&&"false",(null===g||"null"===g)&&"null",!0!==g&&!1!==g&&null!==g&&"null"!==g&&g]}),p&&(0,S.jsx)(l(),{as:(0,Z.o_)(j.mW,y),href:"/datasets/[...slug]",passHref:!0,children:(0,S.jsx)(u.Z,{danger:!0,children:"View all"})})]}))}))}))}),[w,k,F,C,z,Q,K]),te=(0,o.useMemo)((function(){var e;return N?(e=(0,E.Sm)(Q.map(T)),e+=n||D-x.dN):(e=a,e-=n||D),e}),[n,T,a,N,Q]),re=(0,o.useMemo)((function(){return(0,S.jsx)(p.S_,{estimatedItemSize:D,height:te,itemCount:null===Q||void 0===Q?void 0:Q.length,itemSize:function(e){return T(Q[e])},outerRef:L,style:{maxHeight:N,pointerEvents:c?"none":null},children:ne})}),[te,L,ne,Q]);return(0,S.jsx)("div",_(_({},Y()),{},{className:"table sticky",style:{width:M},children:(0,S.jsxs)("div",_(_({},J()),{},{className:"body",children:[(0,S.jsx)("div",{className:"header",ref:A,children:q.map((function(e,n){return(0,o.createElement)("div",_(_({},e.getHeaderGroupProps()),{},{className:"tr",key:"".concat(e.id,"_").concat(n)}),e.headers.map((function(e,n){var t,r=n<=C-1,i=e.getHeaderProps(),u=_({},i.style);return r?(u.fontFamily=O.Vp,u.left=0,u.position="sticky",u.textAlign="center",u.width=F[n],u.minWidth=F[n]):R?t=R(e,n-C,{width:X.width}):(t=e.render("Header"),u.color=(B||g.Z).content.default,u.padding=1*P.iI,u.minWidth=X.width),(0,o.createElement)("div",_(_({},i),{},{className:"th",key:e.id,style:u,title:r?"Row number":void 0}),t)})))}))}),re]}))}))}var H=function(e){var n=e.columnHeaderHeight,t=e.columns,i=e.disableScrolling,u=e.height,c=e.index,l=e.invalidValues,a=e.maxHeight,d=e.noBorderBottom,s=e.noBorderLeft,p=e.noBorderRight,f=e.noBorderTop,h=e.previewIndexes,m=e.renderColumnHeader,v=e.rows,g=e.width,b=(0,o.useMemo)((function(){return null!==c&&void 0!==c&&c.length&&Array.isArray(c[0])?c[0].length:1}),[c]),y=(0,o.useMemo)((function(){return(0,E.w6)(b).map((function(e,n){return{Header:(0,E.w6)(n+1).map((function(){return" "})).join(" "),accessor:function(e,n){return n},sticky:"left"}})).concat(null===t||void 0===t?void 0:t.map((function(e){return{Header:String(e),accessor:String(e)}})))}),[t,b]);return(0,o.useMemo)((function(){return null===v||void 0===v?void 0:v.map((function(e){return e.reduce((function(e,n,i){return _(_({},e),{},(0,r.Z)({},t[i],n))}),{})}))}),[t,v]),(0,S.jsx)(N,{columnHeaderHeight:n,disableScrolling:i,height:u,maxHeight:(a||0)+37,noBorderBottom:d,noBorderLeft:s,noBorderRight:p,noBorderTop:f,children:(0,S.jsx)(C,{columnHeaderHeight:n,columns:y,data:v,disableScrolling:i,height:u,index:c,invalidValues:l,maxHeight:a,numberOfIndexes:b,previewIndexes:h,renderColumnHeader:m,width:g})})}},64155:function(e,n,t){"use strict";t.d(n,{Eh:function(){return l},ht:function(){return d},t0:function(){return a}});var r=t(9518),i=t(82386),o=t(1286),u=t(31012),c=t(49125),l=(c.iI,o.O$+3*c.iI+u.dN),a=r.default.div.withConfig({displayName:"indexstyle__SidekickContainerStyle",componentId:"sc-15ofupc-0"})(["position:relative;width:fit-content;"," ",""],(function(e){return"\n    height: calc(100vh - ".concat(i.uX,"px - ").concat(e.heightOffset,"px);\n  ")}),(function(e){return e.fullWidth&&"\n    width: 100%;\n  "})),d=r.default.div.withConfig({displayName:"indexstyle__PaddingContainerStyle",componentId:"sc-15ofupc-1"})(["padding:","px;",""],2*c.iI,(function(e){return e.noPadding&&"\n    padding: 0;\n  "}))},19395:function(e,n,t){"use strict";t.d(n,{IJ:function(){return d},Vx:function(){return p},eI:function(){return s},gU:function(){return h},tL:function(){return f},vJ:function(){return m}});var r,i,o=t(82394),u=t(92083),c=t.n(u);function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function d(e){return null===e||void 0===e?void 0:e.reduce((function(e,n){var t=n.block_uuid,r=n.completed_at,i=n.started_at,u=n.status,l=null;i&&r&&(l=c()(r).valueOf()-c()(i).valueOf());return a(a({},e),{},(0,o.Z)({},t,{runtime:l,status:u}))}),{})}function s(e){if(!e)return null;var n=new Date(c()(e).valueOf()),t=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds());return new Date(t)}function p(e){return s(e).toISOString().split(".")[0]}!function(e){e.DAY="day",e.HOUR="hour",e.MINUTE="minute",e.SECOND="second"}(i||(i={}));var f=(r={},(0,o.Z)(r,i.DAY,86400),(0,o.Z)(r,i.HOUR,3600),(0,o.Z)(r,i.MINUTE,60),(0,o.Z)(r,i.SECOND,1),r);function h(e){var n=i.SECOND,t=e;return e%86400===0?(t/=86400,n=i.DAY):e%3600===0?(t/=3600,n=i.HOUR):e%60===0&&(t/=60,n=i.MINUTE),{time:t,unit:n}}function m(e,n){return e*f[n]}},82635:function(e,n,t){"use strict";var r,i;t.d(n,{Gi:function(){return i},jU:function(){return u},uF:function(){return r}}),function(e){e.BUSY="busy",e.IDLE="idle",e.QUEUED="queued"}(r||(r={})),function(e){e.IMAGE_PNG="image/png",e.PROGRESS="progress",e.TABLE="table",e.TEXT="text",e.TEXT_HTML="text/html",e.TEXT_PLAIN="text/plain"}(i||(i={}));var o,u=[i.TEXT,i.TEXT_PLAIN];!function(e){e.DISPLAY_DATA="display_data",e.STATUS="status",e.STREAM="stream",e.STREAM_PIPELINE="stream_pipeline"}(o||(o={}))},47409:function(e,n,t){"use strict";t.d(n,{D:function(){return u},V:function(){return o}});var r,i=t(82394),o=t(66050).V,u=(r={},(0,i.Z)(r,o.CANCELLED,"Cancelled"),(0,i.Z)(r,o.COMPLETED,"Done"),(0,i.Z)(r,o.FAILED,"Failed"),(0,i.Z)(r,o.INITIAL,"Ready"),(0,i.Z)(r,o.RUNNING,"Running"),r)},23588:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return L}});var r=t(77837),i=t(75582),o=t(82394),u=t(38860),c=t.n(u),l=t(82684),a=t(83455),d=t(27125),s=t(60328),p=t(34744),f=t(87372),h=t(2626),m=t(47409),v=t(41788),g=t(86673),b=t(82531),y=t(26304),O=t(62976),x=t(86532),w=t(67971),j=t(54283),P=t(19711),Z=t(82635),E=t(64155),S=t(19395),k=t(90211),_=t(28598),D=["blockRuns","columns","dataType","height","heightOffset","loadingData","pipeline","renderColumnHeader","rows","selectedRun","textData"];function I(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function N(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?I(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var T=t(59920),C=t(49125),H=t(96510),R=t(66653);function M(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function B(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?M(Object(t),!0).forEach((function(n){(0,o.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):M(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function A(e){var n,t=e.pipeline,r=e.pipelineRun,o=(0,l.useState)(),u=o[0],c=o[1],v=t.uuid,I=b.ZP.pipelines.detail(v,{includes_content:!1,includes_outputs:!1},{revalidateOnFocus:!1}).data,M=(0,l.useMemo)((function(){return B(B({},null===I||void 0===I?void 0:I.pipeline),{},{uuid:v})}),[I,v]),A=b.ZP.pipeline_runs.detail(r.id,{},{refreshInterval:3e3,revalidateOnFocus:!0}).data,L=(0,l.useMemo)((function(){return null===A||void 0===A?void 0:A.pipeline_run}),[A]),U=(0,a.Db)(b.ZP.pipeline_runs.useUpdate(null===L||void 0===L?void 0:L.id),{onSuccess:function(e){return(0,H.wD)(e,{onErrorCallback:function(e){var n=e.error,t=n.errors,r=n.message;console.log(t,r)}})}}),F=(0,i.Z)(U,2),V=F[0],G=F[1].isLoading,X=b.ZP.outputs.block_runs.list(null===u||void 0===u?void 0:u.id),W=X.data,J=X.loading,Y=(null===W||void 0===W||null===(n=W.outputs)||void 0===n?void 0:n[0])||{},q=Y.sample_data,z=Y.text_data,Q=Y.type,$=(0,l.useMemo)((function(){return null===L||void 0===L?void 0:L.block_runs}),[L]),K=((null===q||void 0===q?void 0:q.columns)||[]).slice(0,40),ee=(null===q||void 0===q?void 0:q.rows)||[],ne=(0,l.useMemo)((function(){return(0,_.jsx)(d.Z,{blockRuns:$,onClickRow:function(e){return c((function(n){var t=$[e];return(null===n||void 0===n?void 0:n.id)!==t.id?t:null}))},pipeline:M,selectedRun:u})}),[$,M,u]);return(0,_.jsxs)(h.Z,{breadcrumbs:[{label:function(){return"Runs"},linkProps:{as:"/pipelines/".concat(v,"/runs"),href:"/pipelines/[pipeline]/runs"}},{label:function(){return null===L||void 0===L?void 0:L.execution_date}}],buildSidekick:function(e){return function(e){var n=e.blockRuns,t=e.columns,r=e.dataType,i=e.height,o=e.heightOffset,u=e.loadingData,c=e.pipeline,l=e.renderColumnHeader,a=e.rows,d=e.selectedRun,s=e.textData,p=N({},(0,y.Z)(e,D));p.blockStatus=(0,S.IJ)(n);var h=(0,_.jsx)(g.Z,{ml:2,children:(0,_.jsx)(P.ZP,{children:"This block run has no output."})}),m=a&&a.length>0?(0,_.jsx)(O.Z,{columnHeaderHeight:l?E.Eh:0,columns:t,height:i-o-90,noBorderBottom:!0,noBorderLeft:!0,noBorderRight:!0,renderColumnHeader:l,rows:a}):h,v=(0,k.Pb)(s)?JSON.stringify(JSON.parse(s),null,2):s,b=s?(0,_.jsx)(g.Z,{ml:2,children:(0,_.jsx)(P.ZP,{monospace:!0,children:(0,_.jsx)("pre",{children:v})})}):h;return(0,_.jsxs)(_.Fragment,{children:[!d&&(0,_.jsx)(x.Z,N(N({},p),{},{height:i,heightOffset:o||0,pipeline:c})),d&&(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(g.Z,{pl:2,py:3,style:{position:"fixed"},children:(0,_.jsx)(f.Z,{level:4,muted:!0,children:"Block Output"})}),(0,_.jsxs)("div",{style:{position:"relative",top:"75px"},children:[u&&(0,_.jsx)(g.Z,{mt:2,children:(0,_.jsx)(w.Z,{alignItems:"center",fullWidth:!0,justifyContent:"center",children:(0,_.jsx)(j.Z,{color:"white",large:!0})})}),!u&&r===Z.Gi.TABLE&&m,!u&&r!==Z.Gi.TABLE&&b]})]})]})}(B(B({},e),{},{blockRuns:$,columns:K,dataType:Q,loadingData:J,rows:ee,selectedRun:u,showDynamicBlocks:!0,textData:z}))},pageName:T.M.RUNS,pipeline:M,subheader:(null===L||void 0===L?void 0:L.status)&&L.status!==m.V.COMPLETED&&(0,_.jsx)(s.Z,{danger:!0,loading:G,onClick:function(e){(0,R.j)(e),V({pipeline_run:{pipeline_run_action:"retry_blocks"}})},outline:!0,children:"Retry incomplete blocks"}),title:function(e){var n=e.name;return"".concat(n," runs")},uuid:"".concat(T.M.RUNS,"_").concat(v,"_").concat(null===L||void 0===L?void 0:L.id),children:[(0,_.jsx)(g.Z,{mt:C.cd,px:C.cd,children:(0,_.jsx)(f.Z,{level:5,children:"Block runs"})}),(0,_.jsx)(p.Z,{light:!0,mt:C.cd,short:!0}),ne]})}A.getInitialProps=function(){var e=(0,r.Z)(c().mark((function e(n){var t,r,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.query,r=t.pipeline,i=t.run,e.abrupt("return",{pipeline:{uuid:r},pipelineRun:{id:i}});case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var L=(0,v.Z)(A)},39525:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/pipelines/[pipeline]/runs/[run]",function(){return t(23588)}])}},function(e){e.O(0,[3850,2083,5896,4804,1774,5872,2125,9767,6579,434,1830,4463,6532,1286,5944,9774,2888,179],(function(){return n=39525,e(e.s=n);var n}));var n=e.O();_N_E=n}]);